# –ó–∞–¥–∞—á–∞ 10.2: Bandwidth Adaptation ‚Äî –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ –ø—Ä–æ–ø—É—Å–∫–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å

## –û–±–∑–æ—Ä

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –≤–∏–¥–µ–æ –ø–æ–¥ –¥–æ—Å—Ç—É–ø–Ω—É—é –ø—Ä–æ–ø—É—Å–∫–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Å–µ—Ç–∏.

## üéØ –¶–µ–ª—å

- –û–ø—Ä–µ–¥–µ–ª—è—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–π bandwidth
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–Ω–∏–∂–∞—Ç—å quality –ø—Ä–∏ –ø–ª–æ—Ö–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏
- –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å quality –ø—Ä–∏ —É–ª—É—á—à–µ–Ω–∏–∏ —Å–µ—Ç–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å simulcast –¥–ª—è SFU

---

## üìö –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è

1. **[RTCRtpSender.setParameters MDN](https://developer.mozilla.org/en-US/docs/Web/API/RTCRtpSender/setParameters)**
2. **[Simulcast explained](https://webrtchacks.com/guide-to-webrtc-simulcast/)**

---

## üìù –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è –±–∏—Ç—Ä–µ–π—Ç–∞

### Hook –¥–ª—è –∞–¥–∞–ø—Ç–∞—Ü–∏–∏

```typescript
// apps/client/src/hooks/use-bandwidth-adaptation.ts
export function useBandwidthAdaptation(
  peerConnection: RTCPeerConnection | null,
  stats: ConnectionStats | null
) {
  useEffect(() => {
    if (!peerConnection || !stats) return;

    const sender = peerConnection.getSenders().find(s => s.track?.kind === 'video');
    if (!sender) return;

    // –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –±–∏—Ç—Ä–µ–π—Ç
    if (stats.quality === 'poor') {
      // –°–Ω–∏–∑–∏—Ç—å –¥–æ 300 Kbps
      adjustBitrate(sender, 300000);
    } else if (stats.quality === 'medium') {
      // –°—Ä–µ–¥–Ω–∏–π 1 Mbps
      adjustBitrate(sender, 1000000);
    } else {
      // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å 2 Mbps
      adjustBitrate(sender, 2000000);
    }
  }, [stats]);
}

async function adjustBitrate(sender: RTCRtpSender, maxBitrate: number) {
  const params = sender.getParameters();
  
  if (!params.encodings || params.encodings.length === 0) {
    params.encodings = [{}];
  }

  params.encodings[0].maxBitrate = maxBitrate;

  await sender.setParameters(params);
  console.log(`Bitrate adjusted to ${maxBitrate / 1000} Kbps`);
}
```

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

- [ ] –ë–∏—Ç—Ä–µ–π—Ç —Å–Ω–∏–∂–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–ª–æ—Ö–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏
- [ ] –ö–∞—á–µ—Å—Ç–≤–æ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —É–ª—É—á—à–µ–Ω–∏–∏
- [ ] Simulcast –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è SFU (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## üéÆ –°–ª–µ–¥—É—é—â–∞—è: [10.3 Reconnection](./10.3-reconnection.md)
