# –ó–∞–¥–∞—á–∞ 1.4: Room Model (public rooms + slug)

## –û–±–∑–æ—Ä

–î–æ–±–∞–≤–ª—è–µ–º –º–æ–¥–µ–ª—å –∫–æ–º–Ω–∞—Ç—ã –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö –≤—Å—Ç—Ä–µ—á. –ö–æ–º–Ω–∞—Ç–∞ –∏–º–µ–µ—Ç –≤–ª–∞–¥–µ–ª—å—Ü–∞, –∫–æ—Ä–æ—Ç–∫–∏–π slug –¥–ª—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è,
–ª–∏–º–∏—Ç —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (10 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) –∏ –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª (active/ended) —Å TTL‚Äë—É–¥–∞–ª–µ–Ω–∏–µ–º.

---

## üéØ –¶–µ–ª—å

- –ú–æ–¥–µ–ª—å `Room` –≤ Prisma schema
- –í–ª–∞–¥–µ–ª–µ—Ü –∫–æ–º–Ω–∞—Ç—ã (owner) ‚Äî —Å–≤—è–∑—å `User -> Room`
- –ü—É–±–ª–∏—á–Ω—ã–µ –∫–æ–º–Ω–∞—Ç—ã + –∫–æ—Ä–æ—Ç–∫–∏–π `slug`
- –ü–æ–ª—è –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞ –∏ TTL: `status`, `endedAt`, `lastActivityAt`
- –ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –∫ –ë–î

---

## üìù –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 1) –û–±–Ω–æ–≤–∏—Ç—å Prisma schema

**–í `apps/server/prisma/schema.prisma`:**

```prisma
model User {
  id           String   @id @default(cuid())
  email        String   @unique
  username     String   @unique
  passwordHash String
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  rooms        Room[]
}

model Room {
  id               String   @id @default(cuid())
  name             String?
  slug             String   @unique
  ownerId          String
  owner            User     @relation(fields: [ownerId], references: [id])
  isPublic         Boolean  @default(true)
  maxParticipants  Int      @default(10)
  status           RoomStatus @default(active)
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
  endedAt          DateTime?
  lastActivityAt   DateTime?

  @@index([ownerId])
  @@index([status])
}

enum RoomStatus {
  active
  ended
}
```

### 2) –ú–∏–≥—Ä–∞—Ü–∏—è + –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞

```bash
pnpm -C apps/server prisma migrate dev --name add-room-model
pnpm -C apps/server prisma generate
```

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

- [ ] –ú–æ–¥–µ–ª—å `Room` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ `schema.prisma`
- [ ] `slug` —É–Ω–∏–∫–∞–ª–µ–Ω –∏ –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω
- [ ] `maxParticipants` –∏–º–µ–µ—Ç default = 10
- [ ] `status`, `endedAt`, `lastActivityAt` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –∫ –ë–î

---

## ‚ö†Ô∏è –ù—é–∞–Ω—Å—ã

- `slug` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫–æ—Ä–æ—Ç–∫–∏–º (6‚Äì8 —Å–∏–º–≤–æ–ª–æ–≤) –∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã–º
- –ü—Ä–∏ –∫–æ–ª–ª–∏–∑–∏–∏ slug ‚Äî –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é
- TTL —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –∫–∞–∫ –æ—á–∏—Å—Ç–∫–∞ `ended` –∫–æ–º–Ω–∞—Ç, –∞ –Ω–µ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ

---

## üéÆ –°–ª–µ–¥—É—é—â–∞—è –∑–∞–¥–∞—á–∞

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–µ—Ä–µ—Ö–æ–¥–∏ –∫ **[–ó–∞–¥–∞—á–∞ 1.5: Rooms API](./1.5-rooms-api.md)**
