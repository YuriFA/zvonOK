# –ó–∞–¥–∞—á–∞ 0.5.6: Login –°—Ç—Ä–∞–Ω–∏—Ü–∞

> **–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ
>
> **–§–∞–π–ª—ã:**
> - `apps/client/src/routes/login.tsx`
> - `apps/client/src/features/auth/login-form.tsx`
> - `apps/client/src/features/auth/auth-header.tsx`

## –û–±–∑–æ—Ä

–ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞ —Å —Ñ–æ—Ä–º–æ–π, –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π, –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Å API.

---

## üéØ –¶–µ–ª—å

- Login —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å Card layout
- LoginForm —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ API
- –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ª–æ–≥–∏–Ω–∞
- AuthHeader –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

---

## üìù –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### –®–∞–≥ 1: AuthHeader –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

**–í `apps/client/src/features/auth/auth-header.tsx`:**

```typescript
import { Link } from 'react-router';

interface AuthHeaderProps {
  title: string;
  subtitle?: string;
}

export function AuthHeader({ title, subtitle }: AuthHeaderProps) {
  return (
    <div className="text-center mb-8">
      <h1 className="text-3xl font-bold text-gray-900">{title}</h1>
      {subtitle && (
        <p className="mt-2 text-gray-600">{subtitle}</p>
      )}
    </div>
  );
}
```

---

### –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç—å LoginForm

**–í `apps/client/src/features/auth/login-form.tsx`:**

```typescript
import { useState } from 'react';
import { useNavigate } from 'react-router';
import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import { loginSchema, type LoginFormData } from './login.schema';
import { authApi } from './auth-api';
import { ApiError, UnauthorizedError } from '../../lib/api.errors';
import { Button } from '../../components/ui/button';
import { Input } from '../../components/ui/input';

export function LoginForm() {
  const navigate = useNavigate();
  const [submitError, setSubmitError] = useState<string | null>(null);

  const {
    register,
    handleSubmit,
    formState: { errors, isSubmitting },
  } = useForm<LoginFormData>({
    resolver: zodResolver(loginSchema),
    defaultValues: {
      email: '',
      password: '',
    },
  });

  const onSubmit = async (data: LoginFormData) => {
    setSubmitError(null);

    try {
      await authApi.login(data);
      // –£—Å–ø–µ—à–Ω—ã–π –ª–æ–≥–∏–Ω - —Ç–æ–∫–µ–Ω—ã –≤ cookies
      navigate('/');
    } catch (error) {
      if (error instanceof UnauthorizedError) {
        setSubmitError('Invalid email or password');
      } else if (error instanceof ApiError) {
        setSubmitError(error.message);
      } else {
        setSubmitError('Network error. Please try again.');
      }
    }
  };

  return (
    <form onSubmit={handleSubmit(onSubmit)} className="space-y-6">
      {/* Email */}
      <div>
        <label htmlFor="email" className="block text-sm font-medium text-gray-700 mb-2">
          Email address
        </label>
        <Input
          id="email"
          type="email"
          placeholder="you@example.com"
          autoComplete="email"
          error={errors.email?.message}
          {...register('email')}
        />
      </div>

      {/* Password */}
      <div>
        <label htmlFor="password" className="block text-sm font-medium text-gray-700 mb-2">
          Password
        </label>
        <Input
          id="password"
          type="password"
          placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
          autoComplete="current-password"
          error={errors.password?.message}
          {...register('password')}
        />
      </div>

      {/* Submit error */}
      {submitError && (
        <div className="p-4 bg-danger-50 border border-danger-200 rounded-md">
          <p className="text-sm text-danger-600">{submitError}</p>
        </div>
      )}

      {/* Submit button */}
      <Button
        type="submit"
        disabled={isSubmitting}
        className="w-full"
        size="lg"
      >
        {isSubmitting ? 'Signing in...' : 'Sign in'}
      </Button>
    </form>
  );
}
```

---

### –®–∞–≥ 3: Login —Å—Ç—Ä–∞–Ω–∏—Ü–∞

**–í `apps/client/src/routes/login.tsx`:**

```typescript
import { Link } from 'react-router';
import { AuthHeader } from '../features/auth/auth-header';
import { LoginForm } from '../features/auth/login-form';
import { Card, CardContent, CardFooter } from '../components/ui/card';

export default function LoginPage() {
  return (
    <div className="min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 px-4">
      <div className="w-full max-w-md">
        <AuthHeader
          title="Welcome back"
          subtitle="Sign in to your account to continue"
        />

        <Card>
          <CardContent className="pt-6">
            <LoginForm />
          </CardContent>

          <CardFooter className="flex flex-col space-y-4">
            <div className="text-center text-sm text-gray-600">
              <Link
                to="/register"
                className="font-medium text-primary-600 hover:text-primary-700"
              >
                Don't have an account? Sign up
              </Link>
            </div>
          </CardFooter>
        </Card>

        {/* Demo credentials hint (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) */}
        <div className="mt-6 text-center">
          <p className="text-xs text-gray-500">
            Demo: test@test.com / password
          </p>
        </div>
      </div>
    </div>
  );
}
```

---

## üìñ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∏—á–∏

### –ó–∞–±—ã–ª –ø–∞—Ä–æ–ª—å (—Å—Å—ã–ª–∫–∞)

```tsx
<div className="flex items-center justify-between mb-6">
  <div className="flex items-center">
    <input
      id="remember-me"
      type="checkbox"
      className="h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"
    />
    <label htmlFor="remember-me" className="ml-2 block text-sm text-gray-700">
      Remember me
    </label>
  </div>

  <div className="text-sm">
    <Link
      to="/forgot-password"
      className="font-medium text-primary-600 hover:text-primary-500"
    >
      Forgot password?
    </Link>
  </div>
</div>
```

### –ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –ø–∞—Ä–æ–ª—å

```tsx
const [showPassword, setShowPassword] = useState(false);

<Input
  id="password"
  type={showPassword ? 'text' : 'password'}
  {...register('password')}
/>

<button
  type="button"
  onClick={() => setShowPassword(!showPassword)}
  className="absolute right-3 top-1/2 -translate-y-1/2"
>
  {showPassword ? <EyeOff /> : <Eye />}
</button>
```

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ email

```tsx
// –°–æ—Ö—Ä–∞–Ω–∏—Ç—å email –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ä–∞–∑–∞
localStorage.setItem('login_email', data.email);

// –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
useEffect(() => {
  const savedEmail = localStorage.getItem('login_email');
  if (savedEmail) {
    setValue('email', savedEmail);
  }
}, []);
```

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

- [x] Login —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è
- [x] Card layout —Å header/footer
- [x] LoginForm —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- [x] API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] –û—à–∏–±–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- [x] –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ª–æ–≥–∏–Ω–∞
- [x] –°—Å—ã–ª–∫–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

---

## üéÆ –°–ª–µ–¥—É—é—â–∞—è –∑–∞–¥–∞—á–∞

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–µ—Ä–µ—Ö–æ–¥–∏ –∫ **[–ó–∞–¥–∞—á–∞ 0.5.7: Register –°—Ç—Ä–∞–Ω–∏—Ü–∞](./0.5.7-register-page.md)**

---

## üí° –ü–æ–ª–µ–∑–Ω–æ–µ

### Test credentials

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫—É:

```tsx
<div className="mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md">
  <p className="text-xs text-blue-700">
    <strong>Demo credentials:</strong><br />
    Email: test@test.com<br />
    Password: password123
  </p>
</div>
```

### Redirect –ø–æ—Å–ª–µ –ª–æ–≥–∏–Ω–∞

```tsx
// –°–æ—Ö—Ä–∞–Ω–∏—Ç—å redirect URL
const location = useLocation();
const searchParams = new URLSearchParams(location.search);
const redirectTo = searchParams.get('redirect') || '/';

// –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ª–æ–≥–∏–Ω–∞
navigate(redirectTo);
```
